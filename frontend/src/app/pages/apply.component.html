<div class="apply-container">
  <!-- Hero Header -->
  <div class="page-hero">
    <div class="hero-content">
      <h1 class="hero-title">
        <mat-icon class="hero-icon">send</mat-icon>
        Apply for Internship
      </h1>
      <p class="hero-subtitle">Take the first step towards your dream career</p>
    </div>
  </div>

  <!-- Application Form Card -->
  <mat-card class="application-card">
    <div class="card-header">
      <mat-icon class="header-icon">description</mat-icon>
      <h2>Application Form</h2>
      <p>Fill out the form below to submit your application</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" class="application-form">
      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>work</mat-icon>
          Position Details
        </h3>
        
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select Internship</mat-label>
          <mat-select formControlName="internshipId" required>
            <mat-option *ngFor="let internship of internships" [value]="internship.id">
              {{ internship.title }} - {{ internship.department }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>business_center</mat-icon>
          <mat-error *ngIf="form.get('internshipId')?.touched && form.get('internshipId')?.errors">
            {{ getErrorMessage('internshipId') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>person</mat-icon>
          Personal Information
        </h3>
        
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Full Name</mat-label>
          <input matInput formControlName="fullName" required placeholder="Enter your full name" />
          <mat-icon matPrefix>badge</mat-icon>
          <mat-error *ngIf="form.get('fullName')?.touched && form.get('fullName')?.errors">
            {{ getErrorMessage('fullName') }}
          </mat-error>
        </mat-form-field>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Email Address</mat-label>
            <input matInput type="email" formControlName="email" required placeholder="your.email@example.com" />
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="form.get('email')?.touched && form.get('email')?.errors">
              {{ getErrorMessage('email') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Phone Number</mat-label>
            <input matInput formControlName="phone" required placeholder="+1 (555) 123-4567" />
            <mat-icon matPrefix>phone</mat-icon>
            <mat-error *ngIf="form.get('phone')?.touched && form.get('phone')?.errors">
              {{ getErrorMessage('phone') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>attach_file</mat-icon>
          Additional Information
        </h3>
        
        <div class="file-upload-section">
          <label class="file-upload-label">Resume Upload (optional)</label>
          <div class="file-upload-container">
            <input 
              type="file" 
              #fileInput 
              (change)="onFileSelected($event)" 
              accept=".pdf,.doc,.docx"
              style="display: none;"
              id="resume-upload"
            />
            
            <div class="file-upload-area" *ngIf="!selectedFileName">
              <button 
                mat-raised-button 
                type="button" 
                class="upload-btn"
                (click)="fileInput.click()"
              >
                <mat-icon>cloud_upload</mat-icon>
                Choose File
              </button>
              <p class="upload-hint">PDF or Word document (Max 5MB)</p>
            </div>

            <div class="file-selected" *ngIf="selectedFileName">
              <div class="file-info">
                <mat-icon class="file-icon">description</mat-icon>
                <span class="file-name">{{ selectedFileName }}</span>
              </div>
              <button 
                mat-icon-button 
                type="button" 
                class="remove-file-btn"
                (click)="removeFile()"
                matTooltip="Remove file"
              >
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Cover Letter</mat-label>
          <textarea matInput rows="6" formControlName="coverLetter" required 
                    placeholder="Tell us why you're interested in this position and what makes you a great fit..."></textarea>
          <mat-icon matPrefix>edit_note</mat-icon>
          <mat-error *ngIf="form.get('coverLetter')?.touched && form.get('coverLetter')?.errors">
            {{ getErrorMessage('coverLetter') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-raised-button type="button" class="cancel-btn" [disabled]="loading">
          <mat-icon>close</mat-icon>
          Cancel
        </button>
        <button mat-raised-button color="primary" type="submit" class="submit-btn" [disabled]="loading">
          <mat-icon>{{ loading ? 'hourglass_empty' : 'send' }}</mat-icon>
          {{ loading ? 'Submitting...' : 'Submit Application' }}
        </button>
      </div>
    </form>
  </mat-card>
</div>
